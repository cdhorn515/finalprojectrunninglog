<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Title</title>
</head>
<span th:include="includes :: css"></span>
<body>
<div th:include="navbar :: user-navbar"></div>
<div class="container">

    <h1 th:inline="text">Welcome, [[${user.first}]]!</h1>

<h3>Your tracked runs:</h3>

<div class="responsive">
    <table class="table table-condensed">
        <tr>
            <th>Date</th>
            <th>Distance</th>
            <th>Time</th>
            <th>Map Link</th>
            <th></th>
            <th></th>
        </tr>
        <tr th:each="run : ${userRuns}">
            <td th:text="${#dates.format(run.date, 'MM-dd-yyyy')}"></td>
            <td th:text="${run.distance}"></td>
            <td th:text="${run.time}"></td>
            <td>
                <a th:href="'/displayMap/' + ${run.map.id}" th:text="${run.map.routeName}"></a>
            </td>
            <td>
                <form action="/user/deleteRun" method="post">
                    <input type="hidden"
                           th:name="${_csrf.parameterName}"
                           th:value="${_csrf.token}"/>
                    <input type="hidden" name="id" th:value="${run.id}"/>
                    <input type="submit" value="Delete"/>
                </form>
            </td>
            <td>
                <form th:action="'/user/updateRun/' + ${run.id}" method="get">
                    <input type="hidden"
                           th:name="${_csrf.parameterName}"
                           th:value="${_csrf.token}"/>
                    <input type="hidden" name="id" th:value="${run.id}"/>
                    <input type="submit" value="Update"/>
                </form>
            </td>
        </tr>
    </table>
    </div>

</div>
<div th:include="navbar :: main-footer"></div>
<span th:include="includes :: js"></span>

</body>
</html>